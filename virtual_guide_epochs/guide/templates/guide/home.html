{% extends 'guide/base.html' %}
{% block title %}–ì–ª–∞–≤–Ω–∞—è{% endblock %}

{% block content %}
<div class="text-center mb-5">
    <h1>üèõ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ!</h1>
    <p class="lead">–ü—Ä–æ–π–¥–∏ –ø—É—Ç—å –æ—Ç –ï–≥–∏–ø—Ç–∞ –¥–æ –†–∏–º–∞ ‚Äî –∏–∑—É—á–∞–π, –∏–≥—Ä–∞–π, –ø–æ–±–µ–∂–¥–∞–π!</p>
</div>

<!-- –û–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å -->
{% if user.is_authenticated %}
<div class="mb-4">
    <h5>üìä –í–∞—à –ø—Ä–æ–≥—Ä–µ—Å—Å: {{ completed }} –∏–∑ {{ total }} –ª–µ–∫—Ü–∏–π ({{ percent }}%)</h5>
    <div class="progress" style="height: 20px;">
        <div class="progress-bar bg-success" role="progressbar"
             style="width: {{ percent }}%;" aria-valuenow="{{ percent }}"
             aria-valuemin="0" aria-valuemax="100">
            {{ percent }}%
        </div>
    </div>
</div>
{% endif %}

<!-- –≠–ø–æ—Ö–∏ –∫–∞–∫ —ç—Ç–∞–ø—ã –∫–≤–µ—Å—Ç–∞ -->
<div class="row row-cols-1 row-cols-md-3 g-4">
    {% for era in eras %}
    <div class="col">
        <div class="card h-100 shadow-sm border-0">
            {% if era.image %}
                <img src="{{ era.image.url }}" class="card-img-top" alt="{{ era.name }}">
            {% endif %}
            <div class="card-body d-flex flex-column">
                <h5 class="card-title">{{ era.name }}</h5>
                <p class="card-text text-muted">{{ era.description|truncatewords:20 }}</p>

                {% if user.is_authenticated %}
                    <a href="{% url 'era_detail' era.pk %}" class="btn btn-outline-primary mt-auto">
                        –ü–µ—Ä–µ–π—Ç–∏ –∫ —ç–ø–æ—Ö–µ
                    </a>
                {% else %}
                    <a href="{% url 'login' %}?next={% url 'era_detail' era.pk %}" class="btn btn-outline-secondary mt-auto">
                        –í–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å
                    </a>
                {% endif %}
            </div>
        </div>
    </div>
    {% endfor %}
</div>
<style>
    .card-img-top {
        object-fit: cover;
        height: 220px;
        width: 100%;
    }
</style>

{% endblock %}
