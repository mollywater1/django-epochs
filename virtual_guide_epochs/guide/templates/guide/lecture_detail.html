{% extends 'guide/base.html' %}
{% load custom_filters %}
{% block title %}{{ lecture.title }}{% endblock %}


{% block content %}
<div class="container">
    <h1 class="text-center mb-4">{{ lecture.title }}</h1>

    <!-- –õ–µ–∫—Ü–∏—è -->
    <div class="card shadow-sm mb-5">
        <div class="card-body">
            <p style="font-size: 18px;">{{ lecture.content|linebreaks }}</p>
        </div>
    </div>

    <!-- –¢–µ—Å—Ç -->
    <div class="card shadow-sm">
        <div class="card-body">
            <h4 class="mb-4 text-center">üß† –ü—Ä–æ–≤–µ—Ä—å —Å–≤–æ–∏ –∑–Ω–∞–Ω–∏—è</h4>
            <form method="post">
                {% csrf_token %}
                {% for question in questions %}
                    <div class="mb-4">
                        <strong>{{ forloop.counter }}. {{ question.question }}</strong>
                        <div class="form-check mt-2">
                            <input class="form-check-input" type="radio" name="question_{{ forloop.counter }}" value="{{ question.option1 }}" required>
                            <label class="form-check-label">{{ question.option1 }}</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="question_{{ forloop.counter }}" value="{{ question.option2 }}">
                            <label class="form-check-label">{{ question.option2 }}</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="question_{{ forloop.counter }}" value="{{ question.option3 }}">
                            <label class="form-check-label">{{ question.option3 }}</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="question_{{ forloop.counter }}" value="{{ question.option4 }}">
                            <label class="form-check-label">{{ question.option4 }}</label>
                        </div>
                    </div>
                {% endfor %}
                <div class="d-grid">
                    <button type="submit" class="btn btn-primary btn-lg">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç–≤–µ—Ç—ã</button>
                </div>
            </form>
        </div>
    </div>
<!-- –õ–µ–∫—Ü–∏–∏ —ç—Ç–æ–π —ç–ø–æ—Ö–∏ -->
<div class="card mt-5">
    <div class="card-body">
        <h5 class="card-title">üìö –õ–µ–∫—Ü–∏–∏ —ç–ø–æ—Ö–∏ ¬´{{ lecture.era.name }}¬ª</h5>
        <ul class="list-group list-group-flush">
            {% for lec in all_lectures %}
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    <a href="{% url 'lecture_detail' lec.pk %}">{{ lec.title }}</a>
                    {% if progress_map|dict_get:lecture.id %}
    <span class="badge bg-success ms-2">‚úÖ</span>
{% endif %}

                </li>
            {% endfor %}
        </ul>
    </div>
</div>

    <!-- –ù–∞–∑–∞–¥ -->
    <div class="text-center mt-4">
        <a href="{% url 'era_detail' lecture.era.pk %}" class="btn btn-outline-secondary">‚¨Ö –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —ç–ø–æ—Ö–µ</a>
    </div>
</div>
{% endblock %}
